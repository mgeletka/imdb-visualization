(function(e){function t(t){for(var a,o,n=t[0],c=t[1],l=t[2],u=0,m=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],a=!0,n=1;n<i.length;n++){var c=i[n];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=i[0]))}return e}var a={},r={app:0},s=[];function o(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var d=c;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var a=i("85ec"),r=i.n(a);r.a},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("MovieFilter",{staticClass:"filter"}),i("BarChart",{staticClass:"barchart"}),i("MovieDetail",{staticClass:"movie_detail",attrs:{movie:e.$store.state.selectedMovie}})],1)},s=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"filter-item"},[i("label",{staticClass:"item-name"},[e._v(" Director ")]),i("Dropdown",{attrs:{options:e.$store.state.directors,disabled:!1,maxItem:5,placeholder:"Please select a director"},on:{selected:e.validateSelection,filter:e.getDropdownValues}})],1),i("div",{staticClass:"filter-item"},[i("label",{staticClass:"item-name"},[e._v("Release year")]),i("br"),i("ejs-slider",{attrs:{min:e.$store.state.minYearOfMovie,max:e.$store.state.maxYearOfMovie,tooltip:{isVisible:!0},ticks:{placement:"After",largeStep:10,smallStep:1,showSmallTicks:!0},type:"Range"},model:{value:e.releaseYearRange,callback:function(t){e.releaseYearRange=t},expression:"releaseYearRange"}})],1),i("div",{staticClass:"filter-item"},[i("label",{staticClass:"item-name"},[e._v("Numbers of filter movies "),i("ejs-slider",{attrs:{id:"format",value:e.numberOfMovies,min:2,max:20,step:1,tooltip:{isVisible:!0},ticks:{placement:"After",largeStep:2,smallStep:1,showSmallTicks:!0}},model:{value:e.numberOfMovies,callback:function(t){e.numberOfMovies=t},expression:"numberOfMovies"}})],1)]),i("div",{staticClass:"filter-item"},[i("label",{staticClass:"item-name"},[e._v(" Genres: ")]),i("label",[e._v(" Check all "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.isCheckedAll,expression:"isCheckedAll"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isCheckedAll)?e._i(e.isCheckedAll,null)>-1:e.isCheckedAll},on:{click:e.checkAll,change:function(t){var i=e.isCheckedAll,a=t.target,r=!!a.checked;if(Array.isArray(i)){var s=null,o=e._i(i,s);a.checked?o<0&&(e.isCheckedAll=i.concat([s])):o>-1&&(e.isCheckedAll=i.slice(0,o).concat(i.slice(o+1)))}else e.isCheckedAll=r}}})]),i("div",{staticClass:"genres"},e._l(e.$store.state.genres,(function(t){return i("div",{key:t,staticClass:"genre"},[i("label",[e._v(" "+e._s(t)+" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedGenres,expression:"checkedGenres"}],attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.checkedGenres)?e._i(e.checkedGenres,t)>-1:e.checkedGenres},on:{change:[function(i){var a=e.checkedGenres,r=i.target,s=!!r.checked;if(Array.isArray(a)){var o=t,n=e._i(a,o);r.checked?n<0&&(e.checkedGenres=a.concat([o])):n>-1&&(e.checkedGenres=a.slice(0,n).concat(a.slice(n+1)))}else e.checkedGenres=s},e.updateCheckall]}})])])})),0)]),i("div",{staticClass:"filter-item"},[i("div",{staticClass:"button_cont",attrs:{align:"center"}},[i("a",{staticClass:"filter-button",class:{disabled:0===e.checkedGenres.length},attrs:{target:"_blank"},on:{click:function(t){return e.showMovies()}}},[e._v(" Show movies! ")])])])])},n=[],c=(i("b0c0"),i("159b"),i("ae2e")),l=i.n(c),d={name:"MovieFilter",data:function(){return{releaseYearRange:[1916,2016],numberOfMovies:10,checkedGenres:[],selectedDirector:null,isCheckedAll:!1}},components:{Dropdown:l.a},methods:{validateSelection:function(e){this.selectedDirector=e.name},getDropdownValues:function(e){return console.log(e),"None"},checkAll:function(){var e=this;this.isCheckedAll=!this.isCheckedAll,this.checkedGenres=[],this.isCheckedAll&&this.$store.state.genres.forEach((function(t){e.checkedGenres.push(t)}))},showMovies:function(){var e={director:this.selectedDirector,releaseDate:{min:this.releaseYearRange[0],max:this.releaseYearRange[1]},genres:this.checkedGenres,numberOfMovies:this.numberOfMovies};console.log(e),this.$store.commit("SHOW_MOVIES",e)},updateCheckall:function(){this.isCheckedAll=this.checkedGenres.length===this.$store.state.genres.length}},mounted:function(){var e=this;setTimeout((function(){e.releaseYearRange=[1916,2016]}),1500)}},u=d,m=(i("88d5"),i("2877")),v=Object(m["a"])(u,o,n,!1,null,null,null),f=v.exports,h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"barchartWrapper",staticClass:"barchart-wrapper"},[e.moviesToVisualize?i("svg",{ref:"svgBarchart",attrs:{width:"100%",height:"100%"}},[i("g",{staticStyle:{width:"100%",height:"100%"},attrs:{transform:"scale(1,-1) translate(0,-200)"}},e._l(e.moviesToVisualize,(function(t,a){return i("rect",{directives:[{name:"tooltip",rawName:"v-tooltip.top-center",value:e.getTooltipText(t),expression:"getTooltipText(movie)",modifiers:{"top-center":!0}}],key:t.movie_title,staticClass:"bar",attrs:{x:e.barWidth*(a+1),y:0,height:e.getHeight(t),width:e.barWidth-10},on:{click:function(i){return e.getMovieDetail(t)}}})})),0)]):e._e()])},p=[],_={name:"BarChart",data:function(){return{barWidth:60,timemoutToGrow:0}},methods:{getMovieDetail:function(e){console.log("Inside click"),this.$store.state.selectedMovie.title=e.movie_title,this.$store.state.selectedMovie.director=e.director_name,this.$store.state.selectedMovie.imdbScore=e.imdb_score,this.$store.commit("UPDATE_MOVIE_DETAIL",e)},getHeight:function(e){var t=this;this.timemoutToGrow<300&&setTimeout((function(){t.timemoutToGrow<300&&t.timemoutToGrow++}),10);var i=this.moviesToVisualize[this.moviesToVisualize.length-1].imdb_score;return(e.imdb_score-i+.5)/(10-i+.5)*this.canvasHeight*(this.timemoutToGrow/300)},getTooltipText:function(e){return e.movie_title+"<br>IMDB score: "+e.imdb_score}},computed:{moviesToVisualize:function(){return this.$store.state.moviesToVisualize},canvasHeight:function(){return this.$refs.barchartWrapper?this.$refs.barchartWrapper.clientHeight:0}},watch:{moviesToVisualize:function(e,t){t!==e&&(this.timemoutToGrow=0)}}},b=_,g=(i("c660"),Object(m["a"])(b,h,p,!1,null,null,null)),k=g.exports,M=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"movie-detail-container"},[i("div",{staticClass:"movie-detail-text"},[i("p",{staticClass:"title"},[e._v(" "+e._s(e.movie.title))]),i("br"),i("p",[i("span",{staticClass:"movie_detail-item-name"},[e._v(" Director: ")]),e._v(" "+e._s(e.movie.director)+" ")]),i("br"),i("p",[i("span",{staticClass:"movie_detail-item-name"},[e._v("Released:")]),e._v(" "+e._s(e.movie.released)+" ")]),i("br"),i("p",[i("span",{staticClass:"movie_detail-item-name"},[e._v("Imdb score:")]),e._v(" "+e._s(e.movie.imdbScore)+" ")]),i("br"),i("p",[i("span",{staticClass:"movie_detail-item-name"},[e._v("Awards:")]),e._v(" "+e._s(e.movie.awards)+" ")]),i("br"),i("p",[i("span",{staticClass:"movie_detail-item-name"},[e._v("Actors:")]),e._v(" "+e._s(e.movie.actors)+" ")]),i("br"),i("p",[i("span",{staticClass:"movie_detail-item-name"},[e._v("Plot:")]),e._v(" "+e._s(e.movie.plot)+" ")])]),i("div"),i("div",{staticClass:"movie_detail-image"},[i("img",{attrs:{src:e.movie.posterUrl}})])])},C=[],O={props:{movie:Object},name:"MovieDetail"},w=O,y=(i("ac1d"),Object(m["a"])(w,M,C,!1,null,"78440286",null)),A=y.exports,T={name:"app",components:{MovieDetail:A,BarChart:k,MovieFilter:f},created:function(){this.$store.commit("LOAD_DATA")}},D=T,x=(i("034f"),Object(m["a"])(D,r,s,!1,null,null,null)),G=x.exports,S=(i("4de4"),i("a630"),i("caad"),i("c975"),i("fb6a"),i("4e82"),i("d3b7"),i("acd8"),i("e25e"),i("ac1f"),i("6062"),i("2532"),i("3ca3"),i("1276"),i("ddb0"),i("2909")),V=i("2f62"),$=i("5698"),E=i("bc3a"),j=i.n(E);function Y(e,t){var i=!1;return t.forEach((function(t){e.genres.includes(t)&&(i=!0)})),i}function I(e,t){var i=[];return e.forEach((function(e){(!t.director||e.director_name===t.director)&&parseInt(e.title_year)>=t.releaseDate.min&&parseInt(e.title_year)<=t.releaseDate.max&&Y(e,t.genres)&&i.push(e)})),i.sort((function(e,t){return parseFloat(t.imdb_score)-parseFloat(e.imdb_score)})),i.slice(0,t.numberOfMovies)}function P(e,t){var i=t.movie_imdb_link.substr(26),a=i.substr(0,i.indexOf("/"));j.a.get("http://".concat(window.location.hostname,":3003/get_movie_detail"),{params:{imdb_id:a}}).then((function(t){console.log(t),200!==t.status?e.errorGettingMovieDetail=!0:(console.log(t.data),e.selectedMovie.plot=t.data.movieDetail.Plot,e.selectedMovie.actors=t.data.movieDetail.Actors,e.selectedMovie.posterUrl=t.data.movieDetail.Poster,e.selectedMovie.awards=t.data.movieDetail.Awards,e.selectedMovie.released=t.data.movieDetail.Released)})).catch((function(){e.errorGettingMovieDetail=!0}))}a["a"].use(V["a"]);var z=new V["a"].Store({state:{filter:{releaseDate:{min:0,max:3e3},director:null,genres:[],numberOfMovies:20},data:null,genres:[],directors:[],minYearOfMovie:null,maxYearOfMovie:null,moviesToVisualize:[],selectedMovie:{title:"",director:"",imdbScore:0,plot:"",actors:"",awards:"",released:"",posterUrl:null},errorGettingMovieDetail:!1},mutations:{LOAD_DATA:function(e){$["a"]("./movie_metadata.csv").then((function(t){var i=new Set,a=new Set;e.data=t,e.minYearOfMovie=parseInt(t[0].title_year),e.maxYearOfMovie=parseInt(t[0].title_year),t.forEach((function(t){e.minYearOfMovie>parseInt(t.title_year)&&(e.minYearOfMovie=t.title_year),e.maxYearOfMovie<parseInt(t.title_year)&&(e.maxYearOfMovie=t.title_year),a.add(t.director_name),t.genres.split("|").forEach((function(e){i.add(e)}))})),e.genres=Array.from(i),e.checkedGenres=Object(S["a"])(e.genres);var r=1;a.forEach((function(t){e.directors.push({id:r,name:t}),r++})),e.directors.sort(),e.genres.sort(),e.filter.genres=i,e.moviesToVisualize=I(e.data,e.filter),e.selectedMovie.title=e.moviesToVisualize[0].movie_title,e.selectedMovie.imdbScore=e.moviesToVisualize[0].imdb_score,e.selectedMovie.director=e.moviesToVisualize[0].director_name,P(e,e.moviesToVisualize[0])}))},SHOW_MOVIES:function(e,t){console.log(t),e.filter=t,e.moviesToVisualize=I(e.data,t)},UPDATE_MOVIE_DETAIL:function(e,t){P(e,t)}},actions:{}}),R=i("3b09"),W=i("e37d");a["a"].use(W["a"]),a["a"].use(R["a"]),a["a"].config.productionTip=!1,new a["a"]({store:z,render:function(e){return e(G)}}).$mount("#app")},"6a8d":function(e,t,i){},7048:function(e,t,i){},"85ec":function(e,t,i){},"88d5":function(e,t,i){"use strict";var a=i("c413"),r=i.n(a);r.a},ac1d:function(e,t,i){"use strict";var a=i("6a8d"),r=i.n(a);r.a},c413:function(e,t,i){},c660:function(e,t,i){"use strict";var a=i("7048"),r=i.n(a);r.a}});
//# sourceMappingURL=app.4bc2fe55.js.map